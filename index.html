<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <style>
    body { margin: 0; background: #111; color: #fff; }
    .viewer { max-width: 1080px; margin: 0 auto; }
    img { width: 100%; display: block; background: #222; }
    .toolbar { position: fixed; top: 0; left: 0; right: 0; padding: 8px 12px; background: rgba(0,0,0,0.5); }
  </style>
</head>
<body>
  <div class="toolbar">Episode 1 · Tap to toggle</div>
  <main class="viewer" id="viewer"></main>
  <script>
    const manifest = [
      { src: 'cover.webp', w: 1080, h: 1600 },
      { src: '1-1.webp', w: 1080, h: 1600 },
      { src: '1-2.webp', w: 1080, h: 1400 },
      { src: '1-3.webp', w: 1080, h: 1400 },
      { src: '2-1.webp', w: 1080, h: 1400 },
      { src: '2-2.webp', w: 1080, h: 1400 },
      { src: '2-3.webp', w: 1080, h: 1400 },
      { src: '2-4.webp', w: 1080, h: 1400 },
      { src: '3-1.webp', w: 1080, h: 1400 },
      { src: '3-2.webp', w: 1080, h: 1400 },
      { src: '3-3.webp', w: 1080, h: 1400 },
      { src: '3-4.webp', w: 1080, h: 1400 },
      { src: '3-5.webp', w: 1080, h: 1400 },
      { src: '3-6.webp', w: 1080, h: 1400 },
      { src: '3-7.webp', w: 1080, h: 1400 },
      { src: '3-8.webp', w: 1080, h: 1400 },
      { src: '5-1.webp', w: 1080, h: 1400 },
      { src: '5-2.webp', w: 1080, h: 1400 },
      { src: '5-3.webp', w: 1080, h: 1400 },
      { src: '4-1.webp', w: 1080, h: 1400 },
      { src: '4-2.webp', w: 1080, h: 1400 },
      { src: '4-3.webp', w: 1080, h: 1400 },
      { src: '4-4.webp', w: 1080, h: 1400 },
      { src: '4-5.webp', w: 1080, h: 1400 },
      { src: '4-6.webp', w: 1080, h: 1400 },
      { src: '4-7.webp', w: 1080, h: 1400 },
      { src: '6-1.webp', w: 1080, h: 1400 },
      { src: '6-2.webp', w: 1080, h: 1400 },
      { src: '6-3.webp', w: 1080, h: 1400 },
      { src: '6-4.webp', w: 1080, h: 1400 },
      { src: '6-5.webp', w: 1080, h: 1400 },
      { src: '6-6.webp', w: 1080, h: 1400 },
      { src: '6-7.webp', w: 1080, h: 1400 },
      { src: '7-1.webp', w: 1080, h: 1400 },
      { src: '7-2.webp', w: 1080, h: 1400 },
      { src: '7-3.webp', w: 1080, h: 1400 },
      { src: '7-4.webp', w: 1080, h: 1400 },
      { src: '7-5.webp', w: 1080, h: 1400 },
      { src: '7-6.webp', w: 1080, h: 1400 },
      { src: '7-7.webp', w: 1080, h: 1400 },
      { src: 'back.webp', w: 1080, h: 1400 },
      // ...
    ];
    const container = document.getElementById('viewer');
    manifest.forEach(item => {
      const img = document.createElement('img');
      img.src = item.src;
      img.loading = 'lazy';
      img.alt = '';
      container.appendChild(img);
    });
        // Prefetch ภาพถัดไปเล็กน้อย
    const prefetchCount = 3;
    let lastVisibleIndex = 0;
    const io = new IntersectionObserver(entries => {
      entries.forEach(e => {
        if (e.isIntersecting) {
          const idx = Array.from(container.children).indexOf(e.target);
          if (idx > lastVisibleIndex) {
            lastVisibleIndex = idx;
            for (let i = 1; i <= prefetchCount; i++) {
              const next = manifest[idx + i];
              if (next) new Image().src = next.src;
            }
          }
        }
      });
    }, { rootMargin: '200px' });
    container.querySelectorAll('img').forEach(img => io.observe(img));
  </script>
</body>
</html>
    
